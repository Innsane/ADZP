@page "{handler?}"
@model AlgorytmDobieraniaZasobowProdukcyjnych.Pages.TreeViewModel
@{
    ViewData["Title"] = "TreeView";
}
@using AlgorytmDobieraniaZasobowProdukcyjnych.Models;
@section Scripts
{
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>

    <script type="text/javascript">
$(document).ready(function () {
    $('#treeView').jstree({
        plugins: [ "changed" ],
        core: {
            "data": @Html.Raw(ViewData["json"]),
        }
    });
});
        $(document).ready(function () {
            $('#dataTable').DataTable({
                processing: true,
            })

            $("#treeView").on("changed.jstree", function (e, data) {
                $("#lb").text(data.node.id);
                $("#tableName").val(data.node.data[0]);
                $('#dataTable').DataTable().column('#kod').search(data.node.id).draw();

                console.log("ID: " + data.node.id);
            });
        });

        $("#dataTable td").click(function () {
            var celltext = $(this).text();
            $("#cellName").val(celltext);
        });

        $(function () {
            $('#myInput').on('click', function () {
                var cellname = document.getElementById("cellName").value;
                $('.modal-body').load(`/treeview/modalimage?path=${'/'+cellname}`);
            });
        })


    </script>
}
<label>Symbol wybranego zasobu: </label>
<label id="lb"> </label>


<form id="form" method="post">
    <select name="picked" asp-for="Picked">
        @foreach (var resource in Model.Resources)
        {
            <option id="item" value="@resource.KeyId">@resource.Nazwa</option>
        }
    </select>
    <input type="submit" id="submitName" value="Display" />
</form>
<br />
<label>Nazwa wybranej tablicy: </label>
<input type="text" id="tableName" disabled />
<button id="tbButton">Load table</button>
<br />
<label>Nazwa wybranej komorki: </label>
<input id="cellName" type="text" />


<div class="row">
    <div style="font-size: 12px"
         id="treeView" class="col-3">
    </div>

    <div id="dt" class="col-9">
        <partial name="_DataTable" model="Model.DataTablePartial" />
    </div>
</div>


<button id="myInput" type="button" class="btn btn-primary" data-toggle="modal" data-target="#imgModal">
    Launch image
</button>
<img src="~/images/Equipment/8711-rys.jpg" alt="Alternate Text" />

<div id="imgModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Nazwa narzedzia</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>













